---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import CTA from "../components/CTA.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import mpaViewTransitions from "../assets/insights/mpa-view-transitions.png";
import defaultPlaceholder from "../assets/insights/default-placeholder.jpg";
import blogPlaceholder2 from "../assets/insights/blog-placeholder-2.jpg";
import blogPlaceholder3 from "../assets/insights/blog-placeholder-3.jpg";
import blogPlaceholder4 from "../assets/insights/blog-placeholder-4.jpg";
import blogPlaceholder5 from "../assets/insights/blog-placeholder-5.jpg";
import blogPlaceholderAbout from "../assets/insights/blog-placeholder-about.jpg";
import designCoverRaw from "../assets/insights/design-cover-raw.jpg";

const posts = (await getCollection("insights"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);

const heroImageMap = {
  "/assets/insights/mpa-view-transitions.png": mpaViewTransitions,
  "/assets/insights/default-placeholder.jpg": defaultPlaceholder,
  "/assets/insights/blog-placeholder-2.jpg": blogPlaceholder2,
  "/assets/insights/blog-placeholder-3.jpg": blogPlaceholder3,
  "/assets/insights/blog-placeholder-4.jpg": blogPlaceholder4,
  "/assets/insights/blog-placeholder-5.jpg": blogPlaceholder5,
  "/assets/insights/blog-placeholder-about.jpg": blogPlaceholderAbout,
  "/assets/insights/design-cover-raw.jpg": designCoverRaw,
};

const defaultImage = defaultPlaceholder;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={`Home | ${SITE_TITLE}`} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header />
    <style>
      /* Home-only layout width: align exactly with header/footer */
      main.home {
        width: 100%;
        max-width: 100%;
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: var(--ws-desktop-width);
        width: 100%;
        padding-left: 1rem;
        padding-right: 1rem;
        margin-left: auto;
        margin-right: auto;
      }
      .hero {
        display: grid;
        grid-template-columns: 1.1fr 0.9fr;
        gap: 2rem;
        align-items: center;
        padding: 4rem 0 2.5rem;
      }
      .hero h1 {
        font-size: clamp(2.2rem, 5vw, 3.4rem);
      }
      .hero em {
        color: var(--accent);
        font-style: normal;
      }
      .hero .cta-row {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        margin-top: 1.25rem;
      }
      /* Buttons inherit global component styles */
      .ratings {
        display: flex;
        gap: 1.5rem;
        margin-top: 1.25rem;
        align-items: center;
        flex-wrap: wrap;
        opacity: 0.9;
        font-size: 0.95rem;
      }
      .badge {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background: #fff;
        border: 1px solid rgb(var(--gray-light));
        padding: 0.5rem 0.75rem;
        border-radius: 10px;
      }
      .badge img {
        width: 32px;
        height: 32px;
      }
      .hero-img {
        border-radius: 16px;
        overflow: hidden;
        box-shadow: var(--box-shadow);
      }

      /* Services */
      .services {
        padding: 1rem 0 2rem;
      }
      .services h2 span {
        color: var(--accent);
      }
      .service-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1rem;
        margin-top: 1.5rem;
      }
      .card {
        background: #fff;
        border: 1px solid rgb(var(--gray-light));
        border-radius: 12px;
        padding: 1rem;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.03);
      }
      .card .more {
        display: inline-block;
        margin-top: 0.5rem;
        color: var(--ws-main-color);
        font-weight: 600;
        font-size: 0.95rem;
      }
      .card .icon {
        width: 44px;
        height: 44px;
        border-radius: 10px;
        background: #f2f4ff;
        display: grid;
        place-items: center;
        font-size: 22px;
        margin-bottom: 0.75rem;
      }

      /* Priority */
      .priority {
        display: grid;
        gap: 2rem;
        align-items: center;
        grid-template-columns: 1fr 1fr;
        padding: 2rem 0;
      }
      .priority .box {
        background: #fff;
        border: 1px solid rgb(var(--gray-light));
        padding: 1.25rem;
        border-radius: 12px;
      }

      /* About + Video */
      .about {
        display: grid;
        gap: 2rem;
        grid-template-columns: 1fr 1fr;
        align-items: center;
        padding: 2rem 0;
      }
      .play {
        position: relative;
        display: block;
      }
      .play::after {
        content: "▶";
        position: absolute;
        inset: 0;
        margin: auto;
        width: 64px;
        height: 64px;
        display: grid;
        place-items: center;
        background: #fff;
        color: var(--ws-main-color);
        border-radius: 999px;
        box-shadow: var(--box-shadow);
      }

      /* Stats / testimonial */
      .stats {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        align-items: start;
        padding: 2rem 0;
      }
      .testi {
        background: #fff;
        border: 1px solid rgb(var(--gray-light));
        padding: 1rem;
        border-radius: 12px;
      }

      /* Blog preview */
      .blog {
        padding: 2rem 0;
      }
      .blog-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
        margin-top: 1rem;
      }



      @media (max-width: 900px) {
        .hero {
          grid-template-columns: 1fr;
        }
        .priority,
        .about,
        .stats {
          grid-template-columns: 1fr;
        }
        .service-grid {
          grid-template-columns: repeat(2, 1fr);
        }
        .blog-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
    <main class="home">
      <div class="container">
        <!-- Hero -->
        <section class="hero">
          <div class="ws_hero-left-column">
            <h1>Insights & Trends in Design, AI, and Development</h1>
            <p class="ws_p_pretty-2rem">
              Exploring the intersection of <strong>web design, AI, and development.</strong> This
              blog covers everything from new tools to timeless principles,
              showing how technology and creativity shape the next era of
              digital experiences.
            </p>
            <div class="cta-row">
              <a
                class="btn"
                href="https://upwork.com/fl/webim"
                target="_blank"
                rel="noopener noreferrer">Order a project</a
              >
              <a class="btn secondary" href="/cases">Latest Cases</a>
            </div>
          </div>
          <figure class="hero-img">
            <img
              src="/images/home/olha-kharlamova-designer.webp"
              alt="Olha Kharlamova — designer and web developer"
              title="Olha Kharlamova — designer and web developer"
              width="944"
              height="1084"
              sizes="(max-width: 900px) 100vw, 472px"
              fetchpriority="high"
              loading="eager"
              decoding="async"
            />
          </figure>
        </section>

        <!-- Services -->
        <section class="services">
          <h2>What’s Inside</h2>
          <div class="service-grid">
            <div class="card">
              <h3>Design Trends</h3><a
                class="more"
                href=""
                title="Discover more about Design Trends">Discover More →</a>
            </div>
            <div class="card">
             <h3>AI Solutions</h3><a
                class="more"
                href=""
                title="Discover more about AI Solutions">Discover More →</a>
            </div>
            <div class="card">
              <h3>Quick Guides</h3><a
                class="more"
                href=""
                title="Discover more Quick Guides">Discover More →</a>
            </div>
            <div class="card">
             <h3>UX Cases</h3><a
                class="more"
                href=""
                title="Discover more UX Cases">Discover More →</a>
            </div>
          </div>
        </section>

        <!-- Priority -->
        <section class="priority">
          <figure>
            <img
              src="/images/home/image-section-1-home.png"
              alt="Olha’s blog — design and development articles"
              title="Olha’s blog — design and development articles"
              width="1140"
              height="800"
              loading="lazy"
              decoding="async"
            />
          </figure>
          <div class="box">
            <img
              src="/images/home/about/badge.svg"
              alt="About badge"
              style="width:64px;height:64px; margin-bottom:.5rem;"
            />
            <h2>Insights & Trends</h2>
            <p class="ws_p_pretty-1rem">
              Quick, practical tips and resources on UI/UX design, productivity,
              and development. No fluff—just bite-sized insights you can read in
              under 5 minutes. (And yes, it’s free!)
            </p>
            <p>
              <a class="btn secondary" href="" title="Read the Blog">Read the Blog</a>
            </p>
          </div>
        </section>

        <!-- Priority -->
        <section class="priority">
          <div class="box">
            <img
              src="/images/home/about/badge.svg"
              alt="About badge"
              style="width:64px;height:64px; margin-bottom:.5rem;"
            />
            <h2>About me</h2>
            <p class="ws_p_pretty-1rem">
              Quick, practical tips and resources on UI/UX design, productivity,
              and development. No fluff—just bite-sized insights you can read in
              under 5 minutes. (And yes, it’s free!)
            </p>
            <p>
              <a class="btn secondary" href="" title="Olha Kharlamova — designer and web developer">Read more</a>
            </p>
          </div>
          <figure>
            <img
              src="/images/home/image-section-2-home.png"
              alt="Olha’s blog — design and development articles"
              title="Olha’s blog — design and development articles"
              width="1140"
              height="800"
              loading="lazy"
              decoding="async"
            />
          </figure>
        </section>
        <!-- Blog preview -->
        <section class="blog">
          <h2>Latest articles</h2>
          <div class="blog-grid">
            {
              posts.map((post) => {
                const image = heroImageMap[post.data.heroImage] || defaultImage;
                const altText = `Cover image for: ${post.data.title}`;
                return (
                  <a href={`/insights/${post.id}/`} class="card">
                    {image ? (
                      <Image
                        src={image}
                        alt={altText}
                        width={720}
                        height={360}
                        style="width:100%;height:auto;border-radius:12px;"
                      />
                    ) : null}
                    <p style="margin:.5rem 0 0; font-weight:600">
                      {post.data.title}
                    </p>
                  </a>
                );
              })
            }
          </div>
        </section>

        <CTA />
      </div>
    </main>
    <Footer />
  </body>
</html>
