---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import mpaViewTransitions from '../assets/insights/mpa-view-transitions.png';
import defaultPlaceholder from '../assets/insights/default-placeholder.jpg';
import blogPlaceholder2 from '../assets/insights/blog-placeholder-2.jpg';
import blogPlaceholder3 from '../assets/insights/blog-placeholder-3.jpg';
import blogPlaceholder4 from '../assets/insights/blog-placeholder-4.jpg';
import blogPlaceholder5 from '../assets/insights/blog-placeholder-5.jpg';
import blogPlaceholderAbout from '../assets/insights/blog-placeholder-about.jpg';
import designCoverRaw from '../assets/insights/design-cover-raw.jpg';

const posts = (await getCollection('insights'))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);

const heroImageMap = {
  '/assets/insights/mpa-view-transitions.png': mpaViewTransitions,
  '/assets/insights/default-placeholder.jpg': defaultPlaceholder,
  '/assets/insights/blog-placeholder-2.jpg': blogPlaceholder2,
  '/assets/insights/blog-placeholder-3.jpg': blogPlaceholder3,
  '/assets/insights/blog-placeholder-4.jpg': blogPlaceholder4,
  '/assets/insights/blog-placeholder-5.jpg': blogPlaceholder5,
  '/assets/insights/blog-placeholder-about.jpg': blogPlaceholderAbout,
  '/assets/insights/design-cover-raw.jpg': designCoverRaw,
};

const defaultImage = defaultPlaceholder;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={`Home | ${SITE_TITLE}`} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header />
    <style>
      @import '../styles/pages/home.css';
    </style>
    <main class="home">
      <div class="container">
        <!-- Hero -->
        <section class="hero">
          <div>
            <h1>Insights & Trends in Design, AI, and Development</h1>
            <p>Fresh ideas in web design and a look into the future of code, AI, and digital creativity.</p>
            <div class="cta-row">
              <a class="btn" href="https://upwork.com/fl/webim" target="_blank" rel="noopener noreferrer">Order a project</a>
              <a class="btn secondary" href="#book">Make An Appointment</a>
            </div>
            <div class="ratings">
              <span class="badge"><img src="/images/home/2.svg" alt="Trustpilot"/> 4.7 Out of 5</span>
              <span class="badge"><img src="/images/home/1.svg" alt="Capterra"/> 4.8 Out of 5</span>
            </div>
          </div>
          <figure class="hero-img">
            <img
              src="/images/home/olha-header-photo.png"
              alt="Olha Kharlamova ‚Äî designer and frontend developer"
              title="Olha Kharlamova ‚Äî designer and frontend developer"
              width="1536"
              height="1024"
              sizes="(max-width: 900px) 100vw, 540px"
              fetchpriority="high"
              loading="eager"
              decoding="async"
            />
          </figure>
        </section>

        <!-- Services -->
        <section class="services">
          <h2>What‚Äôs Inside</h2>
          <div class="service-grid">
            <div class="card"><div class="icon">üé®</div><h3>Design Trends</h3><a class="more" href="" title="Discover more about Design Trends">Discover More ‚Üí</a></div>
            <div class="card"><div class="icon">ü§ñ</div><h3>AI Solutions</h3><a class="more" href="" title="Discover more about AI Solutions">Discover More ‚Üí</a></div>
            <div class="card"><div class="icon">üìò</div><h3>Quick Guides</h3><a class="more" href="" title="Discover more Quick Guides">Discover More ‚Üí</a></div>
            <div class="card"><div class="icon">üñ•Ô∏è</div><h3>UX Cases</h3><a class="more" href="" title="Discover more UX Cases">Discover More ‚Üí</a></div>
          </div>
        </section>

        <!-- Priority -->
        <section class="priority">
          <figure>
            <img
              src="/images/home/olha-blog.png"
              alt="Olha‚Äôs blog ‚Äî design and development articles"
              title="Olha‚Äôs blog ‚Äî design and development articles"
              width="1536"
              height="1024"
              loading="lazy"
              decoding="async"
            />
          </figure>
          <div class="box">
            <img src="/images/home/about/badge.svg" alt="About badge" style="width:64px;height:64px; margin-bottom:.5rem;" />
            <h2>Knowledge Hub</h2>
            <p>Quick, practical tips and resources on UI/UX design, productivity, and development. No fluff‚Äîjust bite-sized insights you can read in under 5 minutes. (And yes, it‚Äôs free!)</p>
            <p><a class="btn" href="" title="Read the Blog">Read the Blog</a></p>
          </div>
        </section>

        <!-- About + Video -->
        <section class="about">
          <div>
            <h2>üåø Where Clean Design Meets Real Business Impact</h2>
            <p>With 15+ years in UX/UI design, I help founders and teams create interfaces and digital experiences that guide users effortlessly and convert with style. Clean design, real results  -  that‚Äôs my sweet spot.</p>
          </div>
          <figure class="play" aria-label="About Olha">
            <img
              src="/images/home/olha-about-me.png"
              alt="Olha ‚Äî about section portrait"
              title="Olha ‚Äî about"
              width="1024"
              height="1536"
              loading="lazy"
              decoding="async"
            />
          </figure>
        </section>

        <!-- Stats + Testimonial -->
        <section class="stats">
          <div>
            <h3>4035</h3>
            <p>Happy Customers & Counting</p>
          </div>
          <div class="testi">
            <p>‚ÄúI‚Äôm really satisfied with the work delivered. The freelancer was professional, responsive, and showed great attention to detail throughout the project. Everything was completed on time and to a high standard. I truly appreciate the effort and would be happy to work together again in the future. Highly recommended!‚Äù</p>
            <p><strong>Jamshid Agzamkhadjaev</strong> ‚Äî Uzbekistan</p>
          </div>
        </section>

        <!-- Blog preview -->
        <section class="blog">
          <h2>Latest articles</h2>
          <div class="blog-grid">
            {posts.map((post) => {
              const image = heroImageMap[post.data.heroImage] || defaultImage;
              const altText = `Cover image for: ${post.data.title}`;
              return (
                <a href={`/insights/${post.id}/`} class="card">
                  {image ? (
                    <Image src={image} alt={altText} width={720} height={360} style="width:100%;height:auto;border-radius:12px;" />
                  ) : null}
                  <p style="margin:.5rem 0 0; font-weight:600">{post.data.title}</p>
                </a>
              );
            })}
          </div>
        </section>

        <!-- CTA -->
        <section class="cta">
          <h2>‚ö° Kickstart Your Project Today</h2>
          <p>Book a quick call to share your goals. I‚Äôll provide a free design and technical review, along with practical recommendations to move your project forward.</p>
          <div class="row">
            <a class="btn" href="https://upwork.com/fl/webim" target="_blank" rel="noopener noreferrer">Order a project</a>
            <a class="btn" href="#book">Make An Appointment</a>
          </div>
          
        </section>
      </div>
    </main>
    <Footer />
  </body>
</html>
